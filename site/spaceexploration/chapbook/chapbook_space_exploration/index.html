<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>"Space Exploration": Chapbook (v1.0.0) - Twine Cookbook</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../../css/theme.css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "\"Space Exploration\": Chapbook (v1.0.0)";
    var mkdocs_page_input_path = "spaceexploration\\chapbook\\chapbook_space_exploration.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Twine Cookbook</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption"><span class="caption-text">Common Questions</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../questions/making/">What can I make with Twine?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../questions/getting_started/">How do I get started?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../questions/links/">How do I make links?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../questions/style_text/">How do I style text?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../questions/stories_saved/">Where are my stories saved?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../questions/need_to_know/">What do I need to know?</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Twine Cookbook</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
    
    <li>"Space Exploration": Chapbook (v1.0.0)</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="space-exploration-chapbook-v100">"Space Exploration": Chapbook (v1.0.0)</h1>
<h2 id="summary">Summary</h2>
<p>Games in the <a href="https://en.wikipedia.org/wiki/Roguelike">rogue-like genre</a> often have random events that influence player choices. Frequently, decisions can have lasting impact or even lead to an ending of play in that session or run depending on these random outcomes.</p>
<p>Heavily inspired by <a href="https://en.wikipedia.org/wiki/FTL:_Faster_Than_Light"><em>FTL: Faster Than Light</em></a> (2012), this example generates a system of four planets consisting of either RED, more risk and more reward, or GREEN, less risk and less reward. Upon entering a system of planets, the player can "Scan System" and then choose to visit these planets for different outcomes based on a series of choices and the use of the <strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random">Math.random()</a></strong> function. At the same time, the player must also balance the health of the ship, the number of jumps left, and the current fuel. These are displayed when visiting the "Statistics" passage. If any of them drop below 0, the game ends with an ending matching that statistic.</p>
<p>This example uses a complex combination of the <a href="https://klembot.github.io/chapbook/guide/state/the-vars-section.html">Vars Section</a>, <a href="https://klembot.github.io/chapbook/guide/advanced/using-javascript-in-passages.html"><code>[JavaScript]</code></a> modifier, and internal JavaScript functionality in Chapbook, including the use of the function <strong>window.go()</strong>.</p>
<h2 id="live-example">Live Example</h2>
<section>
<iframe src="chapbook_space_exploration_example.html" height=400 width=90%></iframe>

Download: <a href="chapbook_space_exploration_example.html" target="_blank">Live Example</a>
</section>

<h2 id="twee-code">Twee Code</h2>
<pre><code class="twee">
:: StoryTitle
Chapbook: Space Exploration

:: UserScript[script]
// Add a randomRange
// Used from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random
Math.randomRange = (min, max) =&gt; {
        min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min)) + min;
};

:: Start
health: 20
fuel: 4
system: []
numberOfJumpsLeft: 10
--
{embed passage: 'GenerateSystem'}

[[Explore Space]]

:: Explore Space
{embed passage: &quot;CheckStatus&quot;}
Current System:
{embed passage: 'DisplaySystem'}
&lt;hr&gt;
[[Hyperjump]]

[[Statistics]]

:: GenerateSystem
[JavaScript]

    // There will always be four (4) planets
    let planets = 4;

    // Reset global system
    let system = engine.state.get('system');
    system = [];

    // Add 0 (Red) or 1 (Green) planets 
    for(let i = 0; i &lt; planets; i++) {
        // Get a random number from 0 to 2
        // 0 = RED
        // 1 = GREEN
        // 2 = EMPTY
        system.push(Math.randomRange(0,3));
    }

    // Update the new 'system'
    engine.state.set('system', system);



:: CheckStatus
[JavaScript]
    let health = engine.state.get(&quot;health&quot;);
    let fuel = engine.state.get(&quot;fuel&quot;);
    let numberOfJumpsLeft = engine.state.get(&quot;numberOfJumpsLeft&quot;);

    if(health &lt;= 0) {
        // Introduce a micro-delay before transition
        setTimeout(() =&gt; {
            go(&quot;Destroyed&quot;);
        }, 10);
    }

    if(fuel &lt;= 0) {
        // Introduce a micro-delay before transition
        setTimeout(() =&gt; {
            go(&quot;Lost in Space&quot;);
        }, 10);
    }

    if(numberOfJumpsLeft &lt;= 0) {
        // Introduce a micro-delay before transition
        setTimeout(() =&gt; {
            go(&quot;Safe&quot;);
        }, 10);
    }



:: Destroyed
The ship exploded in flight.

Game Over.

:: Lost in Space
Without fuel, the ship tumbled and spun in the endless black.

Game Over

:: Safe
After 10 hyperjumps, the ship left the hazardous area and called for help.

Success!

:: Hyperjump
fuel: fuel - 1
numberOfJumpsLeft: numberOfJumpsLeft - 1
--
{embed passage: &quot;CheckStatus&quot;}
{embed passage: &quot;GenerateSystem&quot;}

[[Scan System-&gt;Explore Space]]


:: DisplaySystem
[if system[0] == 0]
    {reveal link: 'RED', passage: 'RED'}
[if system[0] == 1]
    {reveal link: 'GREEN', passage: 'GREEN'}
[if system[0] == 2]
    &lt;br&gt;
[if system[1] == 0]
    {reveal link: 'RED', passage: 'RED'}
[if system[1] == 1]
    {reveal link: 'GREEN', passage: 'GREEN'}
[if system[1] == 2]
    &lt;br&gt;
[if system[2] == 0]
    {reveal link: 'RED', passage: 'RED'}
[if system[2] == 1]
    {reveal link: 'GREEN', passage: 'GREEN'}
[if system[2] == 2]
    &lt;br&gt;
[if system[3] == 0]
    {reveal link: 'RED', passage: 'RED'}
[if system[3] == 1]
    {reveal link: 'GREEN', passage: 'GREEN'}
[if system[3] == 2]
    &lt;br&gt;


:: RED
REPORT
[JavaScript]

    let percentage = Math.randomRange(0, 11);
    let foundHealth;
    let foundFuel;
    let health = engine.state.get('health');
    let fuel = engine.state.get('fuel');

    if(percentage &gt;= 6) {

        foundHealth = Math.randomRange(1, 6);
        foundFuel = Math.randomRange(1, 3);

        write(`The hostile environment damaged the ship, but extra fuel was found. (-${foundHealth} to health and +${foundFuel} to fuel.)`);

        health -= foundHealth;
        fuel += foundFuel;

    }

    if(percentage &gt;= 3 &amp;&amp; percentage &lt; 6) {

          foundHealth = Math.randomRange(2, 8);

          write(`A hostile ship attacked. (-${foundHealth} to health)`);

          health -= foundHealth;

    }

    if(percentage &lt; 3) {
        write(&quot;Nothing happened.&quot;);
    }

    engine.state.set('health', health);
    engine.state.set('fuel', fuel);
[continued]
{embed passage: &quot;CheckStatus&quot;}

:: GREEN
REPORT
[JavaScript]
    let percentage = Math.randomRange(0, 11);
    let foundFuel = 0;
    let foundHealth = 0;
    let fuel = engine.state.get('fuel');
    let health = engine.state.get('health');


    if(percentage &lt; 2) {

        foundFuel = Math.randomRange(1,3);
        write(`Fuel was found in some wreckage. (+${foundFuel} to fuel)`);
        fuel += foundFuel;

    }

    if(percentage &gt; 6) {

        foundHealth = Math.randomRange(1,4);
        write(`During a brief pause, the ship was able to be repaired. (+${foundHealth} to health)`);
        health += foundHealth;

    } 

    if(percentage &gt; 2 &amp;&amp; percentage &lt; 6)
    {
        write(`Nothing happened.`);
    }

    engine.state.set('health', health);
    engine.state.set('fuel', fuel);
[continued]
{embed passage: &quot;CheckStatus&quot;}

:: Statistics
Health: {health}

Fuel: {fuel}

Number of Jumps Left: {numberOfJumpsLeft}

{reveal link: 'Statistics', passage: 'Statistics'}

</code></pre>

<p>Download: <a href="chapbook_space_exploration_twee.txt" target="_blank">Twee Code</a></p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
